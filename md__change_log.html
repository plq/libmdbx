<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libmdbx: ChangeLog</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libmdbx
   &#160;<span id="projectnumber">0.9.0.36 (2020-09-08T20:05:23+03:00)</span>
   </div>
   <div id="projectbrief">One of the fastest embeddable key-value ACID database without WAL.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__change_log.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ChangeLog </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md52"></a>
v0.9.0 (in the development):</h1>
<p>Added features:</p>
<ul>
<li><a href="https://erthink.github.io/libmdbx/">Online API reference</a> by Doxygen.</li>
<li>Functions to explicit reader threads (de)registration.</li>
<li>Separated enums for environment, sub-databases, transactions, copying and data-update flags.</li>
<li>Support for read transactions preparation (<code>MDBX_TXN_RDONLY_PREPARE</code> flag).</li>
</ul>
<p>TODO:</p>
<ul>
<li>Native bindings for C++.</li>
<li>Packages for AltLinux, Fedora/RHEL, Debian/Ubuntu.</li>
</ul>
<p>Deprecated functions and flags:</p>
<ul>
<li>Usage of custom comparators and the <code><a class="el" href="group__c__dbi.html#ga4c0707cc17d08231d561903f78656cb6">mdbx_dbi_open_ex()</a></code> are deprecated, since such databases couldn't be checked by the <code>mdbx_chk</code> utility. Please use the value-to-key functions to provide keys that are compatible with the built-in libmdbx comparators.</li>
<li>For clarity and API simplification the <code>MDBX_MAPASYNC</code> flag is deprecated. Just use <code>MDBX_SAFE_NOSYNC</code> or <code>MDBX_UTTERLY_NOSYNC</code> instead of it.</li>
</ul>
<h1><a class="anchor" id="autotoc_md53"></a>
v0.8.2 2020-07-06:</h1>
<ul>
<li>Added support multi-opening the same DB in a process with SysV locking (BSD).</li>
<li>Fixed warnings &amp; minors for LCC compiler (E2K).</li>
<li>Enabled to simultaneously open the same database from processes with and without the <code>MDBX_WRITEMAP</code> option.</li>
<li>Added key-to-value, <code><a class="el" href="group__c__extra.html#ga6889b6d5d9e1e5d23f4e5f61707a79e1">mdbx_get_keycmp()</a></code> and <code><a class="el" href="group__c__extra.html#ga0098fbf684fe9ad0316197b41941bf96">mdbx_get_datacmp()</a></code> functions (helpful to avoid using custom comparators).</li>
<li>Added <code>ENABLE_UBSAN</code> CMake option to enabling the UndefinedBehaviorSanitizer from GCC/CLANG.</li>
<li>Workaround for <a href="https://bugs.llvm.org/show_bug.cgi?id=43275">CLANG bug</a>.</li>
<li>Returning <code>MDBX_CORRUPTED</code> in case all meta-pages are weak and no other error.</li>
<li>Refined mode bits while auto-creating LCK-file.</li>
<li>Avoids unnecessary database file re-mapping in case geometry changed by another process(es). From the user's point of view, the <code>MDBX_UNABLE_EXTEND_MAPSIZE</code> error will now be returned less frequently and only when using the DB in the current process really requires it to be reopened.</li>
<li>Remapping on-the-fly and of the database file was implemented. Now remapping with a change of address is performed automatically if there are no dependent readers in the current process.</li>
</ul>
<h1><a class="anchor" id="autotoc_md54"></a>
v0.8.1 2020-06-12:</h1>
<ul>
<li>Minor change versioning. The last number in the version now means the number of commits since last release/tag.</li>
<li>Provide ChangeLog file.</li>
<li>Fix for using libmdbx as a C-only sub-project with CMake.</li>
<li>Fix <code><a class="el" href="group__c__settings.html#ga79065e4f3c5fb2ad37a52b59224d583e">mdbx_env_set_geometry()</a></code> for case it is called from an opened environment outside of a write transaction.</li>
<li>Add support for huge transactions and <code>MDBX_HUGE_TRANSACTIONS</code> build-option (default <code>OFF</code>).</li>
<li>Refine LTO (link time optimization) for clang.</li>
<li>Force enabling exceptions handling for MSVC (<code>/EHsc</code> option).</li>
</ul>
<h1><a class="anchor" id="autotoc_md55"></a>
v0.8.0 2020-06-05:</h1>
<ul>
<li>Support for Android/Bionic.</li>
<li>Support for iOS.</li>
<li>Auto-handling <code>MDBX_NOSUBDIR</code> while opening for any existing database.</li>
<li>Engage github-actions to make release-assets.</li>
<li>Clarify API description.</li>
<li>Extended keygen-cases in stochastic test.</li>
<li>Fix fetching of first/lower key from LEAF2-page during page merge.</li>
<li>Fix missing comma in array of error messages.</li>
<li>Fix div-by-zero while copy-with-compaction for non-resizable environments.</li>
<li>Fixes &amp; enhancements for custom-comparators.</li>
<li>Fix <code>MDBX_AVOID_CRT</code> option and missing <code>ntdll.def</code>.</li>
<li>Fix <code><a class="el" href="group__c__opening.html#ga53cd6249371f8fea6868bb2c35a5623a">mdbx_env_close()</a></code> to work correctly called concurrently from several threads.</li>
<li>Fix null-deref in an ASAN-enabled builds while opening the environment with error and/or read-only.</li>
<li>Fix AddressSanitizer errors after closing the environment.</li>
<li>Fix/workaround to avoid GCC 10.x pedantic warnings.</li>
<li>Fix using <code>ENODATA</code> for FreeBSD.</li>
<li>Avoid invalidation of DBI-handle(s) when it just closes.</li>
<li>Avoid using <code>pwritev()</code> for single-writes (up to 10% speedup for some kernels &amp; scenarios).</li>
<li>Avoiding <code>MDBX_UTTERLY_NOSYNC</code> as result of flags merge.</li>
<li>Add <code><a class="el" href="group__c__statinfo.html#ga6bb9689c132368ab6e04997641e42217">mdbx_dbi_dupsort_depthmask()</a></code> function.</li>
<li>Add <code>MDBX_CP_FORCE_RESIZEABLE</code> option.</li>
<li>Add deprecated <code>MDBX_MAP_RESIZED</code> for compatibility.</li>
<li>Add <code>MDBX_BUILD_TOOLS</code> option (default <code>ON</code>).</li>
<li>Refine <code><a class="el" href="group__c__dbi.html#ga4c0707cc17d08231d561903f78656cb6">mdbx_dbi_open_ex()</a></code> to safe concurrently opening the same handle from different threads.</li>
<li>Truncate clk-file during environment closing. So a zero-length lck-file indicates that the environment was closed properly.</li>
<li>Refine <code>mdbx_update_gc()</code> for huge transactions with small sizes of database page.</li>
<li>Extends dump/load to support all MDBX attributes.</li>
<li>Avoid upsertion the same key-value data, fix related assertions.</li>
<li>Rework min/max length checking for keys &amp; values.</li>
<li>Checking the order of keys on all pages during checking.</li>
<li>Support <code>CFLAGS_EXTRA</code> make-option for convenience.</li>
<li>Preserve the last txnid while copying with compactification.</li>
<li>Auto-reset running transaction in <a class="el" href="group__c__transactions.html#gaf3cd3707d0154f81f7f73484068246d1">mdbx_txn_renew()</a>.</li>
<li>Automatically abort errored transaction in <a class="el" href="group__c__transactions.html#ga26ef82044b516a76e2f22192cfeee84a">mdbx_txn_commit()</a>.</li>
<li>Auto-choose page size for large databases.</li>
<li>Rearrange source files, rework build, options-support by CMake.</li>
<li>Crutch for WSL1 (Windows subsystem for Linux).</li>
<li>Refine install/uninstall targets.</li>
<li>Support for Valgrind 3.14 and later.</li>
<li>Add check-analyzer check-ubsan check-asan check-leak targets to Makefile.</li>
<li>Minor fix/workaround to avoid UBSAN traps for <code>memcpy(ptr, NULL, 0)</code>.</li>
<li>Avoid some GCC-analyzer false-positive warnings.</li>
</ul>
<h1><a class="anchor" id="autotoc_md56"></a>
v0.7.0 2020-03-18:</h1>
<ul>
<li>Workarounds for Wine (Windows compatibility layer for Linux).</li>
<li><code>MDBX_MAP_RESIZED</code> renamed to <code>MDBX_UNABLE_EXTEND_MAPSIZE</code>.</li>
<li>Clarify API description, fix typos.</li>
<li>Speedup runtime checks in debug/checked builds.</li>
<li>Added checking for read/write transactions overlapping for the same thread, added <code>MDBX_TXN_OVERLAPPING</code> error and <code>MDBX_DBG_LEGACY_OVERLAP</code> option.</li>
<li>Added <code><a class="el" href="group__value2key.html#ga50dbe75c2a34ea721e6811e02b48111d">mdbx_key_from_jsonInteger()</a></code>, <code><a class="el" href="group__value2key.html#gaed9253e2f01a11053ea274be6c33587a">mdbx_key_from_double()</a></code>, <code><a class="el" href="group__value2key.html#ga5f0c2b150625eae84a02cc46f627ac85">mdbx_key_from_float()</a></code>, <code><a class="el" href="group__value2key.html#gabaa8a5537f6d5bdbef8a9ab794fb49f6">mdbx_key_from_int64()</a></code> and <code><a class="el" href="group__value2key.html#ga99e7843265a2daee6eadeca0d65c47b9">mdbx_key_from_int32()</a></code> functions. See <code><a class="el" href="mdbx_8h.html" title="The libmdbx C API header file.">mdbx.h</a></code> for description.</li>
<li>Fix compatibility (use zero for invalid DBI).</li>
<li>Refine/clarify error messages.</li>
<li>Avoids extra error messages "bad txn" from mdbx_chk when DB is corrupted.</li>
</ul>
<h1><a class="anchor" id="autotoc_md57"></a>
v0.6.0 2020-01-21:</h1>
<ul>
<li>Fix <code>mdbx_load</code> utility for custom comparators.</li>
<li>Fix checks related to <code>MDBX_APPEND</code> flag inside <code><a class="el" href="group__c__crud.html#gacd7da9871acab9043665298f3c4996a3">mdbx_cursor_put()</a></code>.</li>
<li>Refine/fix dbi_bind() internals.</li>
<li>Refine/fix handling <code>STATUS_CONFLICTING_ADDRESSES</code>.</li>
<li>Rework <code>MDBX_DBG_DUMP</code> option to avoid disk I/O performance degradation.</li>
<li>Add built-in help to test tool.</li>
<li>Fix <code><a class="el" href="group__c__settings.html#ga79065e4f3c5fb2ad37a52b59224d583e">mdbx_env_set_geometry()</a></code> for large page size.</li>
<li>Fix env_set_geometry() for large pagesize.</li>
<li>Clarify API description &amp; comments, fix typos.</li>
</ul>
<h1><a class="anchor" id="autotoc_md58"></a>
v0.5.0 2019-12-31:</h1>
<ul>
<li>Fix returning MDBX_RESULT_TRUE from page_alloc().</li>
<li>Fix false-positive ASAN issue.</li>
<li>Fix assertion for <code>MDBX_NOTLS</code> option.</li>
<li>Rework <code>MADV_DONTNEED</code> threshold.</li>
<li>Fix <code>mdbx_chk</code> utility for don't checking some numbers if walking on the B-tree was disabled.</li>
<li>Use page's mp_txnid for basic integrity checking.</li>
<li>Add <code>MDBX_FORCE_ASSERTIONS</code> built-time option.</li>
<li>Rework <code>MDBX_DBG_DUMP</code> to avoid performance degradation.</li>
<li>Rename <code>MDBX_NOSYNC</code> to <code>MDBX_SAFE_NOSYNC</code> for clarity.</li>
<li>Interpret <code>ERROR_ACCESS_DENIED</code> from <code>OpenProcess()</code> as 'process exists'.</li>
<li>Avoid using <code>FILE_FLAG_NO_BUFFERING</code> for compatibility with small database pages.</li>
<li>Added install section for CMake.</li>
</ul>
<h1><a class="anchor" id="autotoc_md59"></a>
v0.4.0 2019-12-02:</h1>
<ul>
<li>Support for Mac OSX, FreeBSD, NetBSD, OpenBSD, DragonFly BSD, OpenSolaris, OpenIndiana (AIX and HP-UX pending).</li>
<li>Use bootid for decisions of rollback.</li>
<li>Counting retired pages and extended transaction info.</li>
<li>Add <code>MDBX_ACCEDE</code> flag for database opening.</li>
<li>Using OFD-locks and tracking for in-process multi-opening.</li>
<li>Hot backup into pipe.</li>
<li>Support for cmake &amp; amalgamated sources.</li>
<li>Fastest internal sort implementation.</li>
<li>New internal dirty-list implementation with lazy sorting.</li>
<li>Support for lazy-sync-to-disk with polling.</li>
<li>Extended key length.</li>
<li>Last update transaction number for each sub-database.</li>
<li>Automatic read ahead enabling/disabling.</li>
<li>More auto-compactification.</li>
<li>Using -fsanitize=undefined and -Wpedantic options.</li>
<li>Rework page merging.</li>
<li>Nested transactions.</li>
<li>API description.</li>
<li>Checking for non-local filesystems to avoid DB corruption. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
